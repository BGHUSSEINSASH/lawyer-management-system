# ๐ ูุธุงู ุงูุฏุงุฆู ูุงููุฏูู - ุฏููู ุดุงูู

## ๐ฏ ููุฏูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุชูุฏู ูุดุงูู ูุฅุฏุงุฑุฉ **ุงูุฏููู ูุงูุฏุงุฆููู** ุฅูู ููุตุฉ ุญุณุงุจุงุช ุงููุญุงููู. ูุฐุง ุงููุธุงู ูููุฑ ุฅุฏุงุฑุฉ ูุงููุฉ ูุฌููุน ุฃููุงุน ุงูุฏููู ูุน ุชุญูููุงุช ูุชูุฏูุฉ ูุชูุงุฑูุฑ ุดุงููุฉ.

---

## ๐ ุฃููุงุน ุงูุฏููู ุงููุฏุนููุฉ

### 1. **ุฏููู ุงูุนููุงุก (ClientDebt)** ๐ฐ
- ุงูุฃููุงู ุงููุณุชุญูุฉ ูู ุงูุนููุงุก/ุงููููููู
- ุชุชุจุน ุฏููู ููู ูููู
- ุฑุจุท ูุจุงุดุฑ ุจุงููุถุงูุง

### 2. **ุฏููู ุงูููุฑุฏูู (VendorPayable)** ๐ฆ
- ุงูุฃููุงู ุงููุณุชุญูุฉ ููููุฑุฏูู ูุงูููุงูููู
- ุฅุฏุงุฑุฉ ุดุฑูุท ุงูุฏูุน
- ุชุฐููุฑุงุช ุงูุงุณุชุญูุงู ุงูุชููุงุฆูุฉ

### 3. **ุฑูุงุชุจ ุงูููุธููู (EmployeeSalary)** ๐
- ุชุชุจุน ุฑูุงุชุจ ุงูููุธููู ูุงููุญุงููู
- ุญุณุงุจุงุช ุงูุชุณุฏูุฏ ุงูุฌุฒุฆู
- ุณุฌู ุงูุฑูุงุชุจ ุงููุชุฃุฎุฑุฉ

### 4. **ุงููุฑูุถ (LoanPayable/LoanReceivable)**
- ุงููุฑูุถ ุนูู ุงูุดุฑูุฉ (LoanPayable)
- ุงููุฑูุถ ุงููุนุทุงุฉ ูุบูุฑูู (LoanReceivable)
- ุญุณุงุจุงุช ุงูููุงุฆุฏ ุชููุงุฆูุฉ

### 5. **ุฃุฎุฑู (Other)**
- ูุฆุฉ ูุฑูุฉ ูุฃููุงุน ุงูุฏููู ุงูุฅุถุงููุฉ

---

## ๐ ุญุงูุงุช ุงูุฏููู

| ุงูุญุงูุฉ | ุงููุตู | ุงูููู |
|--------|-------|--------|
| **Active** | ุฏูู ูุดุท ุบูุฑ ูุณุฏุฏ | ุฃุฒุฑู |
| **Overdue** | ุฏูู ูุชุฃุฎุฑ ุนู ููุนุฏ ุงูุงุณุชุญูุงู | ุฃุญูุฑ |
| **PartiallyPaid** | ุฏูู ูุณุฏุฏ ุฌุฒุฆูุงู | ุจุฑุชูุงูู |
| **Paid** | ุฏูู ูุณุฏุฏ ุจุงููุงูู | ุฃุฎุถุฑ |
| **Written_Off** | ุฏูู ูุนุฏูู ุฃู ููุบู | ุฑูุงุฏู |
| **Settled** | ุฏูู ูุบูู ููุงุฆูุงู | ุฃุฑุฌูุงูู |

---

## ๐๏ธ ูููุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `DebtRecord`
```csharp
public class DebtRecord
{
    public int Id { get; set; }
    public string Name { get; set; }                    // ุงุณู ุงูุฏูู
    public DebtType Type { get; set; }                  // ููุน ุงูุฏูู
    public decimal TotalAmount { get; set; }            // ุงููุจูุบ ุงูููู
    public decimal PaidAmount { get; set; } = 0         // ุงููุจูุบ ุงููุณุฏุฏ
    public decimal RemainingAmount { get; set; }        // ุงููุจูุบ ุงููุชุจูู
    public DebtStatus Status { get; set; }              // ุงูุญุงูุฉ
    public DateTime CreatedAt { get; set; }             // ุชุงุฑูุฎ ุงูุฅูุดุงุก
    public DateTime? DueDate { get; set; }              // ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
    public DateTime? PaidDate { get; set; }             // ุชุงุฑูุฎ ุงูุชุณุฏูุฏ
    public string? Description { get; set; }            // ุงููุตู
    public string? Notes { get; set; }                  // ููุงุญุธุงุช
    
    // ุงูุนูุงูุงุช
    public int? ClientId { get; set; }
    public Client? Client { get; set; }
    
    public int? LawyerId { get; set; }
    public Lawyer? Lawyer { get; set; }
    
    public int? CaseId { get; set; }
    public Case? Case { get; set; }
}
```

### ุฌุฏูู `DebtPayment`
```csharp
public class DebtPayment
{
    public int Id { get; set; }
    public int DebtRecordId { get; set; }        // ุงูุฏูู ุงููุชุนูู
    public decimal Amount { get; set; }          // ูุจูุบ ุงูุฏูุน
    public DateTime PaymentDate { get; set; }    // ุชุงุฑูุฎ ุงูุฏูุน
    public string? PaymentMethod { get; set; }   // ุทุฑููุฉ ุงูุฏูุน
    public string? ReferenceNumber { get; set; } // ุฑูู ุงููุฑุฌุน
    public DateTime CreatedAt { get; set; }
}
```

### ุฌุฏูู `DebtProjection`
```csharp
public class DebtProjection
{
    public int Id { get; set; }
    public int DebtRecordId { get; set; }
    public bool HasInterest { get; set; }
    public decimal InterestRate { get; set; }          // ุงููุณุจุฉ ุงููุฆููุฉ
    public decimal AccumulatedInterest { get; set; }   // ุงููุงุฆุฏุฉ ุงููุชุฑุงููุฉ
    public bool HasPenalty { get; set; }
    public decimal PenaltyAmount { get; set; }         // ุบุฑุงูุงุช ุงูุชุฃุฎูุฑ
    public decimal ProjectedTotal { get; set; }        // ุงููุฌููุน ุงููุชููุน
    public DateTime LastCalculated { get; set; }
}
```

---

## ๐ API Endpoints

### ุงูุฃุณุงุณูุงุช

#### ุงูุญุตูู ุนูู ุฌููุน ุงูุฏููู
```
GET /api/debts
GET /api/debts?type=ClientDebt
GET /api/debts?status=Active
GET /api/debts?clientId=1
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
[
  {
    "id": 1,
    "name": "ุฏููู ุฃุญูุฏ ูุญูุฏ",
    "type": "ClientDebt",
    "totalAmount": 5000000,
    "paidAmount": 2000000,
    "remainingAmount": 3000000,
    "status": "PartiallyPaid",
    "createdAt": "2024-11-01",
    "dueDate": "2024-12-01",
    "clientId": 1,
    "client": { "id": 1, "name": "ุฃุญูุฏ ูุญูุฏ" }
  }
]
```

#### ุงูุญุตูู ุนูู ุฏูู ูุญุฏุฏ
```
GET /api/debts/{id}
```

#### ุฅูุดุงุก ุฏูู ุฌุฏูุฏ
```
POST /api/debts
Content-Type: application/json

{
  "name": "ุฏููู ุนูู ุญุณู",
  "type": "ClientDebt",
  "totalAmount": 10000000,
  "dueDate": "2024-12-15",
  "description": "ุฃุชุนุงุจ ูุถูุฉ",
  "clientId": 2
}
```

#### ุชุญุฏูุซ ุฏูู
```
PUT /api/debts/{id}
Content-Type: application/json

{
  "name": "ุฏููู ุนูู ุญุณู ูุญุฏุซุฉ",
  "status": "Active",
  "notes": "ุชู ุงูุชุญุฏูุซ"
}
```

#### ุญุฐู ุฏูู
```
DELETE /api/debts/{id}
```

### ุงูุนูููุงุช ุงููุงููุฉ

#### ุชุณุฌูู ุฏูุน
```
POST /api/debts/{debtId}/payment
Content-Type: application/json

{
  "amount": 2000000,
  "paymentMethod": "ุชุญููู ุจููู",
  "referenceNumber": "REF-2024-001"
}
```

#### ุงูุญุตูู ุนูู ุฏูุนุงุช ุฏูู
```
GET /api/debts/{debtId}/payments
```

### ุงูุจุญุซ ูุงูุชุตููุฉ

#### ุงูุญุตูู ุนูู ุงูุฏููู ุงููุชุฃุฎุฑุฉ
```
GET /api/debts/overdue
```

#### ุงูุฏููู ุญุณุจ ุงูููุน
```
GET /api/debts/by-type/{type}
```

#### ุงูุฏููู ุญุณุจ ุงูุญุงูุฉ
```
GET /api/debts/by-status/{status}
```

#### ุงูุฏููู ุญุณุจ ุงููููู
```
GET /api/debts/client/{clientId}
```

### ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช

#### ููุฎุต ุงูุฏููู
```
GET /api/debts/reports/summary
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "totalDebtRecords": 45,
  "clientDebts": 150000000,
  "vendorPayables": 50000000,
  "employeeSalaries": 30000000,
  "loansPayable": 100000000,
  "loansReceivable": 25000000,
  
  "activeCount": 25,
  "overdueCount": 8,
  "partialllyPaidCount": 12,
  "paidCount": 20,
  
  "totalRemaining": 200000000,
  "totalPaid": 150000000,
  "totalAmount": 350000000,
  
  "averageDebtAmount": 7777777.78,
  "averageRemainingAmount": 4444444.44
}
```

#### ุชุญููู ุงูุฏููู
```
GET /api/debts/reports/analytics
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
{
  "overdueAmount": 45000000,
  "overdueCount": 8,
  "daysAverageOverdue": 25,
  
  "totalReceivables": 175000000,
  "totalPayables": 180000000,
  "netPosition": -5000000,
  
  "collectionRate": 42.86,
  
  "debtsByTypeBreakdown": {
    "ClientDebt": 80000000,
    "VendorPayable": 60000000,
    "EmployeeSalary": 20000000,
    "LoanPayable": 40000000,
    "LoanReceivable": 15000000
  }
}
```

#### ุชุญููู ุนูุฑ ุงูุฏููู
```
GET /api/debts/reports/age-analysis
```

**ุงูุงุณุชุฌุงุจุฉ:**
```json
[
  {
    "ageRange": "ูู ุชุณุชุญู ุจุนุฏ",
    "count": 15,
    "amount": 50000000
  },
  {
    "ageRange": "ูุชุฃุฎุฑุฉ 1-30 ููู",
    "count": 5,
    "amount": 25000000
  },
  {
    "ageRange": "ูุชุฃุฎุฑุฉ 31-60 ููู",
    "count": 2,
    "amount": 12000000
  },
  {
    "ageRange": "ูุชุฃุฎุฑุฉ ุฃูุซุฑ ูู 90 ููู",
    "count": 1,
    "amount": 8000000
  }
]
```

#### ุฅุฌูุงูู ุงูุฏููู ุงููุณุชุญูุฉ
```
GET /api/debts/total/receivables
```

#### ุฅุฌูุงูู ุงูุฏููู ุนูู ุงูุดุฑูุฉ
```
GET /api/debts/total/payables
```

---

## ๐ป ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

### ุงูุฃูุณุงู ุงูุฑุฆูุณูุฉ

#### 1. ุงููุธุฑุฉ ุงูุนุงูุฉ (Overview)
- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ (ุงูุฏููู ุงููุณุชุญูุฉุ ุงูุฏููู ุนูู ุงูุดุฑูุฉุ ุงูุฑุตูุฏ ุงูุตุงูู)
- ุงูุฏููู ุงููุชุฃุฎุฑุฉ ุจุดูู ุชูุจููู
- ุฑุณูู ุจูุงููุฉ ุชูุถูุญูุฉ
- ุชุญููู ุนูุฑ ุงูุฏููู

#### 2. ุฅุถุงูุฉ ุฏูู ุฌุฏูุฏ (Create)
- ูููุฐุฌ ูุชูุฏู ูุฅุถุงูุฉ ุฏููู
- ุงุฎุชูุงุฑ ููุน ุงูุฏูู
- ุฑุจุท ูุน ุงููููููู ูุงููุญุงููู ูุงููุถุงูุง
- ุชุงุฑูุฎ ุงุณุชุญูุงู
- ููุงุญุธุงุช ูุชูุซูู

#### 3. ูุงุฆูุฉ ุงูุฏููู (List)
- ุฌุฏูู ุดุงูู ูุฌููุน ุงูุฏููู
- ุนูุงูู ุชุตููุฉ (ุงูููุนุ ุงูุญุงูุฉุ ุงูุจุญุซ)
- ุนุฑุถ ุงูุชูุงุตูู
- ุฎูุงุฑุงุช ุงูุฏูุน ูุงูุชุนุฏูู ูุงูุญุฐู
- ุดุฑูุท ุชูุฏู ูุฅุธูุงุฑ ุงููุณุจุฉ ุงููุฏููุนุฉ

#### 4. ุงูุชุญูููุงุช (Analytics)
- ุฑุณูู ุจูุงููุฉ ูุชูุฏูุฉ
- ุชุญููู ูุณุจุฉ ุงูุชุญุตูู
- ุชูุฒูุน ุงูุฏููู ุญุณุจ ุงูููุน
- ุฌุฏุงูู ุฅุญุตุงุฆูุฉ ุชูุตูููุฉ

---

## ๐ ุงูุฑุณูู ุงูุจูุงููุฉ ูุงูุชูุงุฑูุฑ

### ุฃููุงุน ุงูุฑุณูู ุงูุจูุงููุฉ
1. **Pie Chart** - ุชูุฒูุน ุงูุฏููู ุญุณุจ ุงูููุน ูุงูุญุงูุฉ
2. **Bar Chart** - ุงูููุงุฑูุงุช ูุงููุณุจ
3. **Line Chart** - ุงูุชุทูุฑุงุช ุนุจุฑ ุงูุฒูู
4. **Progress Bar** - ูุณุจุฉ ุงูุชุณุฏูุฏ

### ุงูุชูุงุฑูุฑ ุงููุชุงุญุฉ
- ุชูุฑูุฑ ุงูุฏููู ุงููุชุฃุฎุฑุฉ
- ุชูุฑูุฑ ุชุญููู ุนูุฑ ุงูุฏููู
- ุชูุฑูุฑ ูุณุจุฉ ุงูุชุญุตูู
- ุชูุฑูุฑ ุงูุฏุงุฆููู ูุงููุฏูููู
- ุชูุฑูุฑ ุงูููุงุฆุฏ ูุงูุบุฑุงูุงุช

---

## ๐ ุงูุตูุงุญูุงุช

| ุงูุฏูุฑ | ุงูุตูุงุญูุงุช |
|--------|----------|
| **Admin** | โ ูุงูู ุงูุตูุงุญูุงุช |
| **Accountant** | โ ุนุฑุถ ูุชุญุฏูุซ ุงูุฏูููุ ุงูุชูุงุฑูุฑ |
| **Lawyer** | โ ุนุฑุถ ุงูุฏููู ุงููุชุนููุฉ ุจูุถุงูุงูู |

---

## ๐ฑ ุงูููุฒุงุช ุงููุชูุฏูุฉ

### 1. ุญุณุงุจุงุช ุงูููุงุฆุฏ ุงูุชููุงุฆูุฉ
```csharp
// ุญุณุงุจ ุงููุงุฆุฏุฉ ุงูุจุณูุทุฉ
InterestAmount = RemainingAmount ร InterestRate ร Days / 365
```

### 2. ุบุฑุงูุงุช ุงูุชุฃุฎูุฑ
```csharp
// ุบุฑุงูุฉ ุซุงุจุชุฉ ุจูุงุกู ุนูู ุงูุชุฃุฎูุฑ
PenaltyAmount = min(ConfiguredPenalty, RemainingAmount ร 0.1)
```

### 3. ุชุญุฏูุซ ุงูุญุงูุฉ ุงูุชููุงุฆู
- ุนูุฏ ุงูุฏูุน ุงููุงูู โ ุชุบููุฑ ุงูุญุงูุฉ ุฅูู "Paid"
- ุนูุฏ ุชุฌุงูุฒ ุชุงุฑูุฎ ุงูุงุณุชุญูุงู โ "Overdue"
- ุนูุฏ ุงูุฏูุน ุงูุฌุฒุฆู โ "PartiallyPaid"

### 4. ุงูุชูุจููุงุช
- ุชูุจููุงุช ุงูุฏููู ุงููุชุฃุฎุฑุฉ
- ุชุฐููุฑุงุช ูุจู ุชูุงุฑูุฎ ุงูุงุณุชุญูุงู
- ุฅุดุนุงุฑุงุช ุงูุฏููู ุงููุชุฑุงููุฉ

---

## ๐๏ธ ุงููุชุทูุจุงุช ุงูุชูููุฉ

### Backend
- .NET 8 ุฃู ุฃุญุฏุซ
- Entity Framework Core 8.0.7
- SQLite ุฃู ุฃู ูุงุนุฏุฉ ุจูุงูุงุช ุฃุฎุฑู

### Frontend
- HTML5, CSS3, JavaScript (Vanilla)
- ูุชุตูุญ ุญุฏูุซ ูุฏุนู ES6

---

## ๐ฆ ูููุงุช ุงููุธุงู ุงูุฌุฏูุฏุฉ

1. **Models/Entities.cs** - ููุงุฐุฌ ุงูุฏููู ุงูุฌุฏูุฏุฉ
2. **Services/DebtService.cs** - ุฎุฏูุฉ ุฅุฏุงุฑุฉ ุงูุฏููู
3. **Controllers/DebtsController.cs** - API Endpoints
4. **debts.js** - ููุทู JavaScript ูููุงุฌูุฉ
5. **debtor-section.html** - ูุงุฌูุฉ HTML

---

## ๐ ุงูุชุดุบูู

### 1. ุชุญุฏูุซ Backend
```powershell
# ุงูุชูู ุฅูู ูุฌูุฏ Backend
Set-Location backend

# ุงุณุชุนุงุฏุฉ ุงูุญุฒู
dotnet restore

# ุชุดุบูู ุงูุฎุงุฏู
dotnet run --urls "http://localhost:5088"
```

### 2. ุชูุนูู ุงููุธุงู ูู Frontend
```javascript
// ูู app.jsุ ุบููุฑ:
let useBackend = true; // ูู false ุฅูู true
```

### 3. ูุชุญ ุงููุงุฌูุฉ
```powershell
Start-Process "index.html"
```

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ุฅุถุงูุฉ ุฏูู ุนููุงุก
```javascript
const debtData = {
    name: "ุฏููู ูุญูุฏ ุนูู",
    type: "ClientDebt",
    totalAmount: 5000000,
    dueDate: "2024-12-31",
    description: "ุฃุชุนุงุจ ูุถูุฉ ุชุฌุงุฑูุฉ",
    clientId: 1,
    notes: "ุฏูุนุฉ ูุชุฃุฎุฑุฉ"
};

await createDebt(debtData);
```

### ุชุณุฌูู ุฏูุน
```javascript
const paymentData = {
    amount: 2000000,
    paymentMethod: "ุชุญููู ุจููู",
    referenceNumber: "BANK-2024-0001"
};

await recordPayment(debtId, paymentData);
```

### ุงูุญุตูู ุนูู ุงูุชุญูููุงุช
```javascript
const analytics = await getDebtAnalytics();
console.log(`ูุณุจุฉ ุงูุชุญุตูู: ${analytics.collectionRate}%`);
console.log(`ุฅุฌูุงูู ุงููุชุฃุฎุฑ: ${analytics.overdueAmount}`);
```

---

## โจ ุงูุฎุตุงุฆุต ุงููุณุชูุจููุฉ

- โ ุฏุนู ุงูุชุตุฏูุฑ (PDF, Excel)
- โ ุฅุฑุณุงู ุชูุจููุงุช ุจุฑูุฏูุฉ ุชููุงุฆูุฉ
- โ ุฌุฏููุฉ ุงูุฏูุนุงุช
- โ ุฎุทุท ุงูุณุฏุงุฏ
- โ ุชุญููู ุงูุฏููู ุงููุชุฃุฎุฑุฉ
- โ ููุงุท ุงุฆุชูุงู ููุนููุงุก

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
1. ุชุญูู ูู ุณุฌูุงุช ุงูุฃุฎุทุงุก (Console)
2. ุชุฃูุฏ ูู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ:** ููุงูุฑ 7ุ 2026  
**ุงูุฅุตุฏุงุฑ:** 1.0  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
